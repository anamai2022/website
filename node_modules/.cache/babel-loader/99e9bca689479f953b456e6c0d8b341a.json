{"remainingRequest":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/babel-loader/lib/index.js!/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/thanitnetprokaew/Desktop/yfhs/website/src/authUtils.js","dependencies":[{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/src/authUtils.js","mtime":1655813586711},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/cache-loader/dist/cjs.js","mtime":1647752128109},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/babel-loader/lib/index.js","mtime":1647752127988},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1647752168120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL3RoYW5pdG5ldHByb2thZXcvRGVza3RvcC95ZmhzL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvdGhhbml0bmV0cHJva2Fldy9EZXNrdG9wL3lmaHMvd2Vic2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy90aGFuaXRuZXRwcm9rYWV3L0Rlc2t0b3AveWZocy93ZWJzaXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZS9hcHAnOyAvLyBBZGQgdGhlIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgeW91IHdhbnQgdG8gdXNlCgppbXBvcnQgImZpcmViYXNlL2F1dGgiOwppbXBvcnQgImZpcmViYXNlL2ZpcmVzdG9yZSI7Cgp2YXIgRmlyZWJhc2VBdXRoQmFja2VuZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRmlyZWJhc2VBdXRoQmFja2VuZChmaXJlYmFzZUNvbmZpZykgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlyZWJhc2VBdXRoQmFja2VuZCk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWdpc3RlclVzZXIiLCBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZWRlY2xhcmUKICAgICAgICAgIHZhciB1c2VyID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyOwogICAgICAgICAgcmVzb2x2ZSh1c2VyKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ2luVXNlciIsIGZ1bmN0aW9uIChlbWFpbCwgcGFzc3dvcmQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlCiAgICAgICAgICB2YXIgdXNlciA9IGZpcmViYXNlLmF1dGgoKS5jdXJyZW50VXNlcjsKICAgICAgICAgIHJlc29sdmUodXNlcik7CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoX3RoaXMuX2hhbmRsZUVycm9yKGVycm9yKSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmb3JnZXRQYXNzd29yZCIsIGZ1bmN0aW9uIChlbWFpbCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCB7CiAgICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArICIvLyIgKyB3aW5kb3cubG9jYXRpb24uaG9zdCArICIvbG9naW4iCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9nb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduT3V0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2V0TG9nZ2VlZEluVXNlciIsIGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImF1dGhVc2VyIiwgSlNPTi5zdHJpbmdpZnkodXNlcikpOwogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJnZXRBdXRoZW50aWNhdGVkVXNlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhdXRoVXNlcicpKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFVzZXInKSk7CiAgICB9KTsKCiAgICBpZiAoZmlyZWJhc2VDb25maWcpIHsKICAgICAgLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZQogICAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKICAgICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlcikgewogICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRoVXNlciIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnYXV0aFVzZXInKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBSZWdpc3RlcnMgdGhlIHVzZXIgd2l0aCBnaXZlbiBkZXRhaWxzCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoRmlyZWJhc2VBdXRoQmFja2VuZCwgW3sKICAgIGtleTogIl9oYW5kbGVFcnJvciIsCgogICAgLyoqCiAgICAgKiBIYW5kbGUgdGhlIGVycm9yCiAgICAgKiBAcGFyYW0geyp9IGVycm9yIAogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUVycm9yKGVycm9yKSB7CiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOwogICAgICByZXR1cm4gZXJyb3JNZXNzYWdlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZpcmViYXNlQXV0aEJhY2tlbmQ7Cn0oKTsKCnZhciBfZmlyZUJhc2VCYWNrZW5kID0gbnVsbDsKLyoqCiAqIEluaXRpbGl6ZSB0aGUgYmFja2VuZAogKiBAcGFyYW0geyp9IGNvbmZpZyAKICovCgp2YXIgaW5pdEZpcmViYXNlQmFja2VuZCA9IGZ1bmN0aW9uIGluaXRGaXJlYmFzZUJhY2tlbmQoY29uZmlnKSB7CiAgaWYgKCFfZmlyZUJhc2VCYWNrZW5kKSB7CiAgICBfZmlyZUJhc2VCYWNrZW5kID0gbmV3IEZpcmViYXNlQXV0aEJhY2tlbmQoY29uZmlnKTsKICB9CgogIHJldHVybiBfZmlyZUJhc2VCYWNrZW5kOwp9OwovKioKICogUmV0dXJucyB0aGUgZmlyZWJhc2UgYmFja2VuZAogKi8KCgp2YXIgZ2V0RmlyZWJhc2VCYWNrZW5kID0gZnVuY3Rpb24gZ2V0RmlyZWJhc2VCYWNrZW5kKCkgewogIHJldHVybiBfZmlyZUJhc2VCYWNrZW5kOwp9OwoKZXhwb3J0IHsgaW5pdEZpcmViYXNlQmFja2VuZCwgZ2V0RmlyZWJhc2VCYWNrZW5kIH07"},{"version":3,"sources":["/Users/thanitnetprokaew/Desktop/yfhs/website/src/authUtils.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","user","currentUser","error","_handleError","signInWithEmailAndPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","signOut","sessionStorage","setItem","JSON","stringify","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/app';\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nclass FirebaseAuthBackend {\n    constructor(firebaseConfig) {\n        if (firebaseConfig) {\n            // Initialize Firebase\n            firebase.initializeApp(firebaseConfig);\n            firebase.auth().onAuthStateChanged((user) => {\n                if (user) {\n                    sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n                } else {\n                    sessionStorage.removeItem('authUser');\n                }\n            });\n        }\n    }\n\n    /**\n     * Registers the user with given details\n     */\n    registerUser = (email, password) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((user) => {\n                // eslint-disable-next-line no-redeclare\n                var user = firebase.auth().currentUser;\n                resolve(user);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * Login user with given details\n     */\n    loginUser = (email, password) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signInWithEmailAndPassword(email, password).then((user) => {\n                // eslint-disable-next-line no-redeclare\n                var user = firebase.auth().currentUser;\n                resolve(user);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * forget Password user with given details\n     */\n    forgetPassword = (email) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    /**\n     * Logout the user\n     */\n    logout = () => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signOut().then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    setLoggeedInUser = (user) => {\n        sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n    }\n\n    /**\n     * Returns the authenticated user\n     */\n    getAuthenticatedUser = () => {\n        if (!sessionStorage.getItem('authUser'))\n            return null;\n        return JSON.parse(sessionStorage.getItem('authUser'));\n    }\n\n    /**\n     * Handle the error\n     * @param {*} error \n     */\n    _handleError(error) {\n        var errorMessage = error.message;\n        return errorMessage;\n    }\n}\n\nlet _fireBaseBackend = null;\n\n/**\n * Initilize the backend\n * @param {*} config \n */\nconst initFirebaseBackend = (config) => {\n    if (!_fireBaseBackend) {\n        _fireBaseBackend = new FirebaseAuthBackend(config);\n    }\n    return _fireBaseBackend;\n}\n\n/**\n * Returns the firebase backend\n */\nconst getFirebaseBackend = () => {\n    return _fireBaseBackend;\n}\n\nexport { initFirebaseBackend, getFirebaseBackend };"]}]}