{"remainingRequest":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/babel-loader/lib/index.js!/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/thanitnetprokaew/Desktop/yfhs/website/src/router/index.js","dependencies":[{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/src/router/index.js","mtime":1655813586786},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/cache-loader/dist/cjs.js","mtime":1647752128109},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/babel-loader/lib/index.js","mtime":1647752127988},{"path":"/Users/thanitnetprokaew/Desktop/yfhs/website/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1647752168120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3RoYW5pdG5ldHByb2thZXcvRGVza3RvcC95ZmhzL3dlYnNpdGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvdGhhbml0bmV0cHJva2Fldy9EZXNrdG9wL3lmaHMvd2Vic2l0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFZ1ZU1ldGEgZnJvbSAndnVlLW1ldGEnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdGF0ZS9zdG9yZSc7CmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMnOwpWdWUudXNlKFZ1ZVJvdXRlcik7ClZ1ZS51c2UoVnVlTWV0YSwgewogIGtleU5hbWU6ICdwYWdlJwp9KTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIHJvdXRlczogcm91dGVzLAogIG1vZGU6ICdoaXN0b3J5JywKICBzY3JvbGxCZWhhdmlvcjogZnVuY3Rpb24gc2Nyb2xsQmVoYXZpb3IodG8sIGZyb20sIHNhdmVkUG9zaXRpb24pIHsKICAgIGlmIChzYXZlZFBvc2l0aW9uKSB7CiAgICAgIHJldHVybiBzYXZlZFBvc2l0aW9uOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB4OiAwLAogICAgICAgIHk6IDAKICAgICAgfTsKICAgIH0KICB9Cn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAocm91dGVUbywgcm91dGVGcm9tLCBuZXh0KSB7CiAgdmFyIGF1dGhSZXF1aXJlZCA9IHJvdXRlVG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgcmV0dXJuIHJvdXRlLm1ldGEuYXV0aFJlcXVpcmVkOwogIH0pOwogIGlmICghYXV0aFJlcXVpcmVkKSByZXR1cm4gbmV4dCgpOwoKICBpZiAoc3RvcmUuZ2V0dGVyc1snYXV0aC9sb2dnZWRJbiddKSB7CiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ2F1dGgvdmFsaWRhdGUnKS50aGVuKGZ1bmN0aW9uICh2YWxpZFVzZXIpIHsKICAgICAgdmFsaWRVc2VyID8gbmV4dCgpIDogcmVkaXJlY3RUb0xvZ2luKCk7CiAgICB9KTsKICB9CgogIHJlZGlyZWN0VG9Mb2dpbigpOwoKICBmdW5jdGlvbiByZWRpcmVjdFRvTG9naW4oKSB7CiAgICBuZXh0KHsKICAgICAgbmFtZTogJ2xvZ2luJywKICAgICAgcXVlcnk6IHsKICAgICAgICByZWRpcmVjdEZyb206IHJvdXRlVG8uZnVsbFBhdGgKICAgICAgfQogICAgfSk7CiAgfQoKICB2YXIgcHVibGljUGFnZXMgPSBbJy9sb2dpbicsICcvcmVnaXN0ZXInLCAnL2ZvcmdvdC1wYXNzd29yZCddOwogIHZhciBhdXRocGFnZSA9ICFwdWJsaWNQYWdlcy5pbmNsdWRlcyhyb3V0ZVRvLnBhdGgpOwogIHZhciBsb2dnZWR1c2VyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKCiAgaWYgKGF1dGhwYWdlICYmICFsb2dnZWR1c2VyKSB7CiAgICByZXR1cm4gbmV4dCgnL2xvZ2luJyk7CiAgfQoKICBuZXh0KCk7Cn0pOwpyb3V0ZXIuYmVmb3JlUmVzb2x2ZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyb3V0ZVRvLCByb3V0ZUZyb20sIG5leHQpIHsKICAgIHZhciBfaXRlcmF0b3IsIF9zdGVwLCBfbG9vcDsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocm91dGVUby5tYXRjaGVkKTsKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICBfbG9vcCA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICAgICAgICB2YXIgcm91dGU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9sb29wJChfY29udGV4dCkgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIHJvdXRlID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEuYmVmb3JlUmVzb2x2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlLm1ldGEuYmVmb3JlUmVzb2x2ZShyb3V0ZVRvLCByb3V0ZUZyb20sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdSZWRpcmVjdGVkJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9sb29wKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfaXRlcmF0b3IucygpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuZGVsZWdhdGVZaWVsZChfbG9vcCgpLCAidDAiLCA3KTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDExOwogICAgICAgICAgICBfY29udGV4dDIudDEgPSBfY29udGV4dDJbImNhdGNoIl0oMik7CgogICAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dDIudDEpOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTQ7CgogICAgICAgICAgICBfaXRlcmF0b3IuZigpOwoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMTQpOwoKICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTk7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IF9jb250ZXh0MlsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIG5leHQoKTsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDE5XSwgWzIsIDExLCAxNCwgMTddXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIsIF94MykgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCkpOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["/Users/thanitnetprokaew/Desktop/yfhs/website/src/router/index.js"],"names":["Vue","VueRouter","VueMeta","store","routes","use","keyName","router","mode","scrollBehavior","to","from","savedPosition","x","y","beforeEach","routeTo","routeFrom","next","authRequired","matched","some","route","meta","getters","dispatch","then","validUser","redirectToLogin","name","query","redirectFrom","fullPath","publicPages","authpage","includes","path","loggeduser","localStorage","getItem","beforeResolve","Promise","resolve","reject","length","Error"],"mappings":";;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,UAApB;AAEA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,SAAR;AACAD,GAAG,CAACK,GAAJ,CAAQH,OAAR,EAAiB;AACfI,EAAAA,OAAO,EAAE;AADM,CAAjB;AAIA,IAAMC,MAAM,GAAG,IAAIN,SAAJ,CAAc;AAC3BG,EAAAA,MAAM,EAANA,MAD2B;AAE3BI,EAAAA,IAAI,EAAE,SAFqB;AAG3BC,EAAAA,cAH2B,0BAGZC,EAHY,EAGRC,IAHQ,EAGFC,aAHE,EAGa;AACtC,QAAIA,aAAJ,EAAmB;AACjB,aAAOA,aAAP;AACD,KAFD,MAEO;AACL,aAAO;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE;AAAX,OAAP;AACD;AACF;AAT0B,CAAd,CAAf;AAWAP,MAAM,CAACQ,UAAP,CAAkB,UAACC,OAAD,EAAUC,SAAV,EAAqBC,IAArB,EAA8B;AAC5C,MAAMC,YAAY,GAAGH,OAAO,CAACI,OAAR,CAAgBC,IAAhB,CAAqB,UAACC,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAN,CAAWJ,YAAtB;AAAA,GAArB,CAArB;AACA,MAAI,CAACA,YAAL,EAAmB,OAAOD,IAAI,EAAX;;AACnB,MAAIf,KAAK,CAACqB,OAAN,CAAc,eAAd,CAAJ,EAAoC;AAClC,WAAOrB,KAAK,CAACsB,QAAN,CAAe,eAAf,EAAgCC,IAAhC,CAAqC,UAACC,SAAD,EAAe;AACzDA,MAAAA,SAAS,GAAGT,IAAI,EAAP,GAAYU,eAAe,EAApC;AACD,KAFM,CAAP;AAGD;;AACDA,EAAAA,eAAe;;AACf,WAASA,eAAT,GAA2B;AACzBV,IAAAA,IAAI,CAAC;AAAEW,MAAAA,IAAI,EAAE,OAAR;AAAiBC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAEf,OAAO,CAACgB;AAAxB;AAAxB,KAAD,CAAJ;AACD;;AACD,MAAMC,WAAW,GAAG,CAAC,QAAD,EAAW,WAAX,EAAwB,kBAAxB,CAApB;AACA,MAAMC,QAAQ,GAAG,CAACD,WAAW,CAACE,QAAZ,CAAqBnB,OAAO,CAACoB,IAA7B,CAAlB;AACA,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAnB;;AAEA,MAAIL,QAAQ,IAAI,CAACG,UAAjB,EAA6B;AAC3B,WAAOnB,IAAI,CAAC,QAAD,CAAX;AACD;;AAEDA,EAAAA,IAAI;AACP,CArBD;AAuBAX,MAAM,CAACiC,aAAP;AAAA,qEAAqB,iBAAOxB,OAAP,EAAgBC,SAAhB,EAA2BC,IAA3B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAEGF,OAAO,CAACI,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAENE,sBAAAA,KAFM;AAAA;AAAA,6BAGT,IAAImB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrC,4BAAIrB,KAAK,CAACC,IAAN,IAAcD,KAAK,CAACC,IAAN,CAAWiB,aAA7B,EAA4C;AAC1ClB,0BAAAA,KAAK,CAACC,IAAN,CAAWiB,aAAX,CAAyBxB,OAAzB,EAAkCC,SAAlC,EAA6C,YAAa;AACxD,gCAAI,UAAK2B,MAAT,EAAiB;AACf1B,8BAAAA,IAAI,MAAJ;AACAyB,8BAAAA,MAAM,CAAC,IAAIE,KAAJ,CAAU,YAAV,CAAD,CAAN;AACD,6BAHD,MAGO;AACLH,8BAAAA,OAAO;AACR;AACF,2BAPD;AAQD,yBATD,MASO;AACLA,0BAAAA,OAAO;AACR;AACF,uBAbK,CAHS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAqBnBxB,YAAAA,IAAI;;AArBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAAA;AAAA;AAAA;AAAA;AAwBA,eAAeX,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport VueMeta from 'vue-meta'\n\nimport store from '@/state/store'\nimport routes from './routes'\n\nVue.use(VueRouter)\nVue.use(VueMeta, {\n  keyName: 'page',\n})\n\nconst router = new VueRouter({\n  routes,\n  mode: 'history',\n  scrollBehavior(to, from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition\n    } else {\n      return { x: 0, y: 0 }\n    }\n  },\n})\nrouter.beforeEach((routeTo, routeFrom, next) => {\n    const authRequired = routeTo.matched.some((route) => route.meta.authRequired)\n    if (!authRequired) return next()\n    if (store.getters['auth/loggedIn']) {\n      return store.dispatch('auth/validate').then((validUser) => {\n        validUser ? next() : redirectToLogin()\n      })\n    }\n    redirectToLogin()\n    function redirectToLogin() {\n      next({ name: 'login', query: { redirectFrom: routeTo.fullPath } })\n    }\n    const publicPages = ['/login', '/register', '/forgot-password'];\n    const authpage = !publicPages.includes(routeTo.path);\n    const loggeduser = localStorage.getItem('user');\n\n    if (authpage && !loggeduser) {\n      return next('/login');\n    }\n\n    next();\n})\n\nrouter.beforeResolve(async (routeTo, routeFrom, next) => {\n  try {\n    for (const route of routeTo.matched) {\n      await new Promise((resolve, reject) => {\n        if (route.meta && route.meta.beforeResolve) {\n          route.meta.beforeResolve(routeTo, routeFrom, (...args) => {\n            if (args.length) {\n              next(...args)\n              reject(new Error('Redirected'))\n            } else {\n              resolve()\n            }\n          })\n        } else {\n          resolve()\n        }\n      })\n    }\n  } catch (error) {\n    return\n  }\n  next()\n})\n\nexport default router\n"]}]}